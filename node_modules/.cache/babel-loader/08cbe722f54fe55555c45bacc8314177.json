{"ast":null,"code":"import _regeneratorRuntime from \"/home/imirfanmumtaz/www/react/apex-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/imirfanmumtaz/www/react/apex-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/imirfanmumtaz/www/react/apex-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/imirfanmumtaz/www/react/apex-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/imirfanmumtaz/www/react/apex-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/imirfanmumtaz/www/react/apex-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/imirfanmumtaz/www/react/apex-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/imirfanmumtaz/www/react/apex-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/imirfanmumtaz/www/react/apex-react/src/views/access-control-list/edit.js\";\nimport React, { Component, Fragment } from \"react\";\nimport config from \"../../app/config\";\nimport { store } from \"../../redux/storeConfig/store\";\nimport ContentHeader from \"../../components/contentHead/contentHeader\";\nimport { Alert, Button, Card, CardBody, CardTitle, Col, FormGroup, Input, Label, Row, Form } from \"reactstrap\";\nimport { CheckSquare, FileText, Info, Mail, X, Map } from \"react-feather\";\nimport { Field, Formik } from \"formik\";\nimport * as Yup from \"yup\";\nimport Select from 'react-select';\nvar formSchema = Yup.object().shape({\n  name: Yup.string()\n});\n\nvar Create = /*#__PURE__*/function (_Component) {\n  _inherits(Create, _Component);\n\n  function Create(props) {\n    var _this;\n\n    _classCallCheck(this, Create);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Create).call(this, props));\n    _this.state = {\n      auth: store.getState().authentication.Auth,\n      formValues: {\n        name: '',\n        permissions: []\n      },\n      multivalues: [{\n        label: \"access_all\",\n        value: 1\n      }, {\n        label: \"access_all\",\n        value: 1\n      }],\n      permissions: [],\n      alert: {\n        display: false,\n        type: \"success\",\n        message: \"\"\n      }\n    };\n    _this.getPermissions = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var permissions, requestOptions;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              permissions = _this.state.permissions;\n              requestOptions = {\n                method: 'GET',\n                headers: {\n                  'Content-Type': 'application/json',\n                  \"Authorization\": \"Bearer \".concat(_this.state.auth.token)\n                }\n              };\n              fetch(\"\".concat(config.base_url, \"v1/acl/permission\"), requestOptions).then(_this.handleResponse).then(function (response) {\n                if (response.success === true) {\n                  var alert = {\n                    type: \"success\",\n                    message: response.message,\n                    display: true\n                  };\n                  var _permissions = response.data.permissions;\n                  var statePermission = [];\n\n                  _permissions.map(function (permission) {\n                    return statePermission.push({\n                      value: permission.id,\n                      label: permission.name\n                    });\n                  });\n\n                  _this.setState({\n                    permissions: statePermission\n                  });\n                }\n\n                return response;\n              });\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    _this.getRole = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var id, formValues, requestOptions;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              id = _this.props.match.params.id;\n              formValues = _this.state.formValues;\n              requestOptions = {\n                method: 'GET',\n                headers: {\n                  'Content-Type': 'application/json',\n                  \"Authorization\": \"Bearer \".concat(_this.state.auth.token)\n                }\n              };\n              fetch(\"\".concat(config.base_url, \"v1/acl/role/\").concat(id), requestOptions).then(_this.handleResponse).then(function (response) {\n                if (response.success === true) {\n                  var alert = {\n                    type: \"success\",\n                    message: response.message,\n                    display: true\n                  };\n                  var _formValues = response.data.role;\n                  _formValues.addPermission = [];\n\n                  _this.setState({\n                    formValues: _formValues\n                  });\n                } else {\n                  var _alert = {\n                    type: \"danger\",\n                    message: response.error.message,\n                    display: true\n                  };\n\n                  _this.setState({\n                    alert: _alert\n                  });\n                }\n\n                return response;\n              });\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    _this.updateRole = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var id, formValues, requestOptions;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              id = _this.props.match.params.id;\n              formValues = _this.state.formValues;\n              requestOptions = {\n                method: 'PUT',\n                headers: {\n                  'Content-Type': 'application/json',\n                  \"Authorization\": \"Bearer \".concat(_this.state.auth.token)\n                },\n                body: JSON.stringify(formValues)\n              };\n              fetch(\"\".concat(config.base_url, \"v1/vehicle/\").concat(id), requestOptions).then(_this.handleResponse).then(function (response) {\n                if (response.success === true) {\n                  var alert = {\n                    type: \"success\",\n                    message: response.message,\n                    display: true\n                  };\n\n                  _this.setState({\n                    alert: alert\n                  });\n                } else {\n                  var _alert2 = {\n                    type: \"danger\",\n                    message: response.error.message,\n                    display: true\n                  };\n\n                  _this.setState({\n                    alert: _alert2\n                  });\n                }\n\n                return response;\n              });\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    _this.handleSubmit = function (e) {\n      _this.updateVehicle();\n    };\n\n    _this.handleResetForm = function () {\n      document.getElementById(\"vehicleForm\").reset();\n    };\n\n    _this.handleMultiChange = _this.handleMultiChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Create, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.getRole();\n      this.getPermissions();\n    }\n  }, {\n    key: \"handleResponse\",\n    value: function handleResponse(response) {\n      return response.text().then(function (text) {\n        return text && JSON.parse(text);\n      });\n    }\n  }, {\n    key: \"handleMultiChange\",\n    value: function handleMultiChange(option) {\n      this.setState(function (state) {\n        return {\n          multivalues: option\n        };\n      });\n      console.log(option, this.state.multivalues);\n    }\n  }, {\n    key: \"findPermission\",\n    value: function findPermission(id) {\n      var formValues = this.state.formValues;\n      var obj = formValues.permissions.find(function (p) {\n        return p.id === id;\n      });\n\n      if (obj) {\n        if (formValues.addPermission.indexOf(id === -1)) {\n          formValues.addPermission.push(id);\n        }\n\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          permissions = _this$state.permissions,\n          formValues = _this$state.formValues;\n      return /*#__PURE__*/React.createElement(Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(ContentHeader, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 17\n        }\n      }, \"Vehicles Update \"), /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        md: \"12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Card, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(CardBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"px-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Form, {\n        id: \"vehicleForm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-body\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"form-section\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 45\n        }\n      }, /*#__PURE__*/React.createElement(Map, {\n        size: 20,\n        color: \"#212529\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 74\n        }\n      }), \" Role Info\"), /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 45\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        md: \"12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 49\n        }\n      }, /*#__PURE__*/React.createElement(FormGroup, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 53\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        for: \"name\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 57\n        }\n      }, \"Role Name\"), /*#__PURE__*/React.createElement(Input, {\n        name: \"name\",\n        id: \"name\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 57\n        }\n      })))), /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 45\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        md: \"12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 49\n        }\n      }, /*#__PURE__*/React.createElement(Select, {\n        options: permissions,\n        value: this.state.multivalues,\n        onChange: this.handleMultiChange,\n        multi: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 53\n        }\n      })))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-actions\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        color: \"primary\",\n        type: \"submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 45\n        }\n      }, /*#__PURE__*/React.createElement(CheckSquare, {\n        size: 16,\n        color: \"#FFF\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 49\n        }\n      }), \" Save\"), this.state.alert.display && /*#__PURE__*/React.createElement(Alert, {\n        color: this.state.alert.type,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 49\n        }\n      }, this.state.alert.message)))))))));\n    }\n  }]);\n\n  return Create;\n}(Component);\n\nexport default Create;","map":{"version":3,"sources":["/home/imirfanmumtaz/www/react/apex-react/src/views/access-control-list/edit.js"],"names":["React","Component","Fragment","config","store","ContentHeader","Alert","Button","Card","CardBody","CardTitle","Col","FormGroup","Input","Label","Row","Form","CheckSquare","FileText","Info","Mail","X","Map","Field","Formik","Yup","Select","formSchema","object","shape","name","string","Create","props","state","auth","getState","authentication","Auth","formValues","permissions","multivalues","label","value","alert","display","type","message","getPermissions","requestOptions","method","headers","token","fetch","base_url","then","handleResponse","response","success","data","statePermission","map","permission","push","id","setState","getRole","match","params","role","addPermission","error","updateRole","body","JSON","stringify","handleSubmit","e","updateVehicle","handleResetForm","document","getElementById","reset","handleMultiChange","bind","text","parse","option","console","log","obj","find","p","indexOf"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from \"react\";\nimport config from \"../../app/config\";\nimport {store} from \"../../redux/storeConfig/store\";\nimport ContentHeader from \"../../components/contentHead/contentHeader\";\nimport {Alert, Button, Card, CardBody, CardTitle, Col, FormGroup, Input, Label, Row, Form} from \"reactstrap\";\nimport {CheckSquare, FileText, Info, Mail, X, Map} from \"react-feather\";\nimport {Field, Formik} from \"formik\";\nimport * as Yup from \"yup\";\nimport Select from 'react-select';\n\nconst formSchema = Yup.object().shape({\n    name: Yup.string()\n});\n\nclass Create extends Component {\n    constructor(props) {\n        super(props);\n        this.handleMultiChange = this.handleMultiChange.bind(this);\n    }\n\n    state = {\n        auth: store.getState().authentication.Auth,\n        formValues: {\n            name: '',\n            permissions: []\n        },\n        multivalues: [\n            {\n                label: \"access_all\",\n                value: 1\n            },\n            {\n                label: \"access_all\",\n                value: 1\n            }\n        ],\n        permissions: [],\n        alert: {\n            display: false,\n            type: \"success\",\n            message: \"\"\n        }\n    };\n\n\n    componentWillMount() {\n        this.getRole();\n        this.getPermissions();\n    }\n\n    getPermissions = async () => {\n        const { permissions } = this.state;\n        const requestOptions = {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json',\n                \"Authorization\": `Bearer ${this.state.auth.token}`\n            }\n        };\n        fetch(`${config.base_url}v1/acl/permission`, requestOptions)\n            .then(this.handleResponse)\n            .then(response => {\n                if(response.success === true){\n                    const alert = {\n                        type: \"success\",\n                        message: response.message,\n                        display: true\n                    };\n                    const {permissions} = response.data;\n                    let statePermission = [];\n                    permissions.map( permission => (\n                        statePermission.push({\n                            value: permission.id,\n                            label: permission.name\n                        })\n                    ));\n                    this.setState({permissions: statePermission });\n                }\n                return response;\n            });\n    };\n\n    getRole = async () => {\n        const { id } = this.props.match.params;\n        const { formValues } = this.state;\n        const requestOptions = {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json',\n                \"Authorization\": `Bearer ${this.state.auth.token}`\n            }\n        };\n        fetch(`${config.base_url}v1/acl/role/${id}`, requestOptions)\n            .then(this.handleResponse)\n            .then(response => {\n                if(response.success === true){\n                    const alert = {\n                        type: \"success\",\n                        message: response.message,\n                        display: true\n                    };\n                    let formValues = response.data.role;\n                    formValues.addPermission = [];\n                    this.setState({formValues });\n                }\n                else{\n                    const alert = {\n                        type: \"danger\",\n                        message: response.error.message,\n                        display: true\n                    };\n                    this.setState({alert});\n                }\n                return response;\n            });\n    };\n\n    updateRole = async () => {\n        const { id } = this.props.match.params;\n        const { formValues } = this.state;\n        const requestOptions = {\n            method: 'PUT',\n            headers: {\n                'Content-Type': 'application/json',\n                \"Authorization\": `Bearer ${this.state.auth.token}`\n            },\n            body: JSON.stringify(formValues)\n        };\n        fetch(`${config.base_url}v1/vehicle/${id}`, requestOptions)\n            .then(this.handleResponse)\n            .then(response => {\n                if(response.success === true){\n                    const alert = {\n                        type: \"success\",\n                        message: response.message,\n                        display: true\n                    };\n                    this.setState({alert});\n                }\n                else{\n                    const alert = {\n                        type: \"danger\",\n                        message: response.error.message,\n                        display: true\n                    };\n                    this.setState({alert});\n                }\n                return response;\n            });\n    };\n\n    handleResponse(response) {\n        return response.text().then(text => {\n            return text && JSON.parse(text);\n        });\n    }\n\n    handleSubmit = e => {\n        this.updateVehicle();\n    };\n\n    handleMultiChange(option) {\n        this.setState(state => {\n            return {\n                multivalues: option\n            };\n        });\n        console.log(option, this.state.multivalues)\n    }\n\n    handleResetForm = () => {\n        document.getElementById(\"vehicleForm\").reset();\n    };\n\n    findPermission(id){\n        let {formValues} = this.state;\n        let obj = formValues.permissions.find(p => p.id === id);\n        if(obj) {\n            if(formValues.addPermission.indexOf(id === -1)){\n                formValues.addPermission.push(id);\n            }\n            return true;\n        }\n        return false;\n    }\n\n    render() {\n        const {permissions, formValues} = this.state;\n        return (\n            <Fragment>\n                <ContentHeader>Vehicles Update </ContentHeader>\n\n                <Row>\n                    <Col md=\"12\">\n                        <Card>\n                            <CardBody>\n                                <div className=\"px-3\">\n                                    <Form id=\"vehicleForm\">\n                                        <div className=\"form-body\">\n                                            <h4 className=\"form-section\"><Map size={20} color=\"#212529\" /> Role Info</h4>\n                                            <Row>\n                                                <Col md=\"12\">\n                                                    <FormGroup>\n                                                        <Label for=\"name\">Role Name</Label>\n                                                        <Input name=\"name\" id=\"name\"/>\n                                                    </FormGroup>\n                                                </Col>\n                                            </Row>\n\n                                            <Row>\n                                                <Col md=\"12\">\n                                                    <Select\n                                                        options = {permissions}\n                                                        value={this.state.multivalues}\n                                                        onChange={this.handleMultiChange}\n                                                        multi  />\n                                                </Col>\n                                            </Row>\n\n                                        </div>\n\n                                        <div className=\"form-actions\">\n                                            <Button color=\"primary\" type=\"submit\">\n                                                <CheckSquare size={16} color=\"#FFF\" /> Save\n                                            </Button>\n                                            {   this.state.alert.display &&\n                                                <Alert color={this.state.alert.type} >\n                                                    {this.state.alert.message}\n                                                </Alert>\n                                            }\n\n\n                                        </div>\n                                    </Form>\n                                </div>\n                            </CardBody>\n                        </Card>\n                    </Col>\n                </Row>\n            </Fragment>\n        );\n    }\n}\n\nexport default Create;\n"]},"metadata":{},"sourceType":"module"}