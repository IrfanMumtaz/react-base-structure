(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{840:function(e,t,a){"use strict";a.r(t);var n=a(98),s=a.n(n),r=a(99),i=a(20),l=a(21),c=a(23),o=a(22),m=a(24),u=a(0),d=a.n(u),p=a(95),h=a(25),f=a(94),v=a(96),E=a(97),b=a(107),g=a(109),y=a(279),S=g.object().shape({name:g.string().required("Required").max(50,"Role name is too long.")}),k=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(c.a)(this,Object(o.a)(t).call(this))).getPermissions=Object(r.a)(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.state.permissions,a={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.state.auth.token)}},fetch("".concat(p.a.base_url,"v1/acl/permission"),a).then(e.handleResponse).then(function(t){if(!0===t.success){t.message;var a=t.data.permissions,n=[];a.map(function(e){return n.push({value:e.id,label:e.name})}),e.setState({permissions:n})}return t});case 3:case"end":return t.stop()}},t)})),e.createRole=Object(r.a)(s.a.mark(function t(){var a,n,r,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=e.state,n=a.formValues,r=a.multivalues,n.permissions=[],r.map(function(e){n.permissions.push(e.value)}),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.state.auth.token)},body:JSON.stringify(n)},fetch("".concat(p.a.base_url,"v1/acl/role"),i).then(e.handleResponse).then(function(t){if(!0===t.success){var a={type:"success",message:t.message,display:!0};e.setState({alert:a})}else{var n={type:"danger",message:t.error.message,display:!0};e.setState({alert:n})}return t});case 5:case"end":return t.stop()}},t)})),e.handleSubmit=function(t){e.createRole()},e.handleMultiChange=function(t){e.setState({multivalues:t})},e.handleResetForm=function(){document.getElementById("roleForm").reset()},e.state={auth:h.a.getState().authentication.Auth,formValues:{name:"",permissions:[]},multivalues:[],permissions:[],alert:{display:!1,type:"success",message:""}},e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.getPermissions()}},{key:"handleResponse",value:function(e){return e.text().then(function(e){return e&&JSON.parse(e)})}},{key:"findPermission",value:function(e){var t=this.state.formValues;return!!t.permissions.find(function(t){return t.id===e})&&(t.addPermission.indexOf(-1===e)&&t.addPermission.push(e),!0)}},{key:"render",value:function(){var e=this,t=this.state,a=t.permissions;t.formValues;return d.a.createElement(u.Fragment,null,d.a.createElement(f.a,null,"Vehicles Update "),d.a.createElement(v.x,null,d.a.createElement(v.f,{md:"12"},d.a.createElement(v.d,null,d.a.createElement(v.e,null,d.a.createElement("div",{className:"px-3"},d.a.createElement(b.c,{initialValues:this.state.formValues,enableReinitialize:!0,validationSchema:S,onSubmit:function(t,a){var n=a.setSubmitting;n(!0),e.setState({formValues:t}),e.handleSubmit(),n(!1)}},function(t){t.values,t.isSubmitting;var n=t.errors,s=t.touched;t.handleChange;return d.a.createElement(b.b,{id:"roleForm"},d.a.createElement("div",{className:"form-body"},d.a.createElement("h4",{className:"form-section"},d.a.createElement(E.Map,{size:20,color:"#212529"})," Role Info"),d.a.createElement(v.x,null,d.a.createElement(v.f,{md:"12"},d.a.createElement(v.m,null,d.a.createElement(v.o,{for:"name"},"Role Name"),d.a.createElement(b.a,{name:"name",id:"name",className:"form-control ".concat(n.name&&s.name&&"is-invalid")}),n.name&&s.name?d.a.createElement("div",{className:"invalid-feedback"},n.name):null))),d.a.createElement(v.x,null,d.a.createElement(v.f,{md:"12"},d.a.createElement(y.a,{options:a,value:e.state.multivalues,onChange:e.handleMultiChange,isMulti:!0})))),d.a.createElement("div",{className:"form-actions"},d.a.createElement(v.c,{color:"primary",type:"submit"},d.a.createElement(E.CheckSquare,{size:16,color:"#FFF"})," Save"),e.state.alert.display&&d.a.createElement(v.a,{color:e.state.alert.type},e.state.alert.message)))})))))))}}]),t}(u.Component);t.default=k},94:function(e,t,a){"use strict";var n=a(0),s=a.n(n);t.a=function(e){var t=e.className;return s.a.createElement("div",{className:"content-header".concat(void 0===t?"":" ".concat(t))},e.children)}},95:function(e,t,a){"use strict";t.a={base_url:"http://api.ticketmanagement.local/"}}}]);
//# sourceMappingURL=12.4c67317e.chunk.js.map