(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{860:function(e,t,a){"use strict";a.r(t);var n=a(9),s=a(20),l=a(21),i=a(23),c=a(22),r=a(24),o=a(0),m=a.n(o),u=(a(15),a(96));a(6);var d=a(163);Object(d.a)();a(31);var p=a(25),h=a(861),g=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(n.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.setState({submitted:!0});var t=a.state,n=t.inputEmail,s=t.inputPass;if(n&&s){var l={method:"Post",headers:{"Content-Type":"application/json","Client-ID":"2","Client-Secret":"6ggiz82gkKRyuJQQHtYpOTkRWPlGNBJJMXBAXnxT",Accept:"*/*"},body:JSON.stringify({username:n,password:s})};fetch("".concat("http://api.ticketmanagement.local/","v1/auth/get-access-token"),l).then(a.handleResponse).then(function(e){if(console.log(e),!0===e.success)localStorage.setItem("access_token",btoa(e.data.authentication.access_token)),localStorage.setItem("user",btoa(JSON.stringify(e.data.authentication.user))),localStorage.setItem("acl",btoa(JSON.stringify(e.data.authentication.permissions))),window.location.reload();else{var t={type:"danger",message:e.error.message,display:!0};a.setState({alert:t})}return e})}},a.handleResetForm=function(){a.setState({inputEmail:"",inputPass:""}),document.getElementById("loginForm").reset()},a.state={inputEmail:"",inputPass:"",submitted:!1,alert:{display:!1,type:"success",message:""}},console.log(a.state),a}return Object(r.a)(t,e),Object(l.a)(t,[{key:"isLoggedIn",value:function(){return p.a.getState().authentication.Login.loggedIn}},{key:"handleResponse",value:function(e){return e.text().then(function(e){return e&&JSON.parse(e)})}},{key:"render",value:function(){return!0===this.isLoggedIn()?m.a.createElement(h.a,{to:"/"}):m.a.createElement("div",{className:"container"},m.a.createElement(u.x,{className:"full-height-vh"},m.a.createElement(u.f,{xs:"12",className:"d-flex align-items-center justify-content-center"},m.a.createElement(u.d,{className:"gradient-indigo-purple text-center width-400"},m.a.createElement(u.e,null,m.a.createElement("h2",{className:"white py-4"},"Login"),m.a.createElement(u.l,{className:"pt-2",onSubmit:this.handleSubmit,id:"loginForm"},m.a.createElement(u.m,null,m.a.createElement(u.f,{md:"12"},m.a.createElement(u.n,{type:"email",className:"form-control",name:"inputEmail",id:"inputEmail",placeholder:"Email",required:!0,onChange:this.handleChange}))),m.a.createElement(u.m,null,m.a.createElement(u.f,{md:"12"},m.a.createElement(u.n,{type:"password",className:"form-control",name:"inputPass",id:"inputPass",placeholder:"Password",required:!0,onChange:this.handleChange}))),m.a.createElement(u.m,null,m.a.createElement(u.f,{md:"12"},m.a.createElement(u.c,{type:"submit",color:"danger",block:!0,className:"btn-pink btn-raised"},"Submit"),m.a.createElement(u.c,{type:"button",color:"secondary",block:!0,className:"btn-raised",onClick:this.handleResetForm},"Cancel"),this.state.alert.display&&m.a.createElement(u.a,{color:this.state.alert.type},this.state.alert.message)))))))))}}]),t}(o.Component);t.default=g}}]);
//# sourceMappingURL=7.77542b95.chunk.js.map